{# Exploration Template #}
{% set emoji = config.options.use_emojis if config and config.options else true %}
{% set hierarchical = config.options.use_hierarchical_structure if config and config.options else true %}

{# Header with conditional emoji #}
{% if emoji %}ğŸ”{% endif %} Exploration Session: {{ data.session_id }}
{{ "=" * 60 }}

{# Summary section #}
{% if emoji %}ğŸ“Š{% endif %} SUMMARY:
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Session ID: {{ data.session_id }}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Project Path: {{ data.project_path }}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Intent: {{ data.intent }}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Total Trees: {{ data.total_trees }}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Token Count: {{ data.token_count }}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Max Tokens: {{ data.max_tokens }}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} Token Usage: {{ ((data.token_count / data.max_tokens) * 100) | round(1) }}%
{% if hierarchical %}â””â”€â”€{% else %}â€¢{% endif %} Compression: {{ data.compression_level }}

{# Confidence scores section #}
{% if data.confidence_scores %}
{% if emoji %}ğŸ¯{% endif %} CONFIDENCE SCORES:
{% for tree_id, score in data.confidence_scores.items() %}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} {{ tree_id }}: {{ (score * 100) | round(1) }}%
{% endfor %}
{% endif %}

{# Trees section #}
{% if data.trees %}
{% if emoji %}ğŸŒ²{% endif %} EXPLORATION TREES:
{% for tree in data.trees %}
{% if hierarchical %}â”œâ”€â”€{% else %}â€¢{% endif %} {{ tree.tree_id }}: {{ tree.context_name }}
{% if hierarchical %}â”‚   {% else %}  {% endif %}Confidence: {{ (tree.confidence * 100) | round(1) }}%
{% if hierarchical %}â”‚   {% else %}  {% endif %}Entrypoints: {{ tree.entrypoints | length }}
{% if hierarchical %}â”‚   {% else %}  {% endif %}Total Nodes: {{ tree.total_nodes }}
{% if hierarchical %}â”‚   {% else %}  {% endif %}Max Depth: {{ tree.max_depth }}
{% if hierarchical %}â”‚   {% else %}  {% endif %}Root File: {{ tree.root_file }}
{% if tree.description %}
{% if hierarchical %}â”‚   {% else %}  {% endif %}Description: {{ tree.description[:100] }}{% if tree.description | length > 100 %}...{% endif %}
{% endif %}

{# Entrypoints for this tree #}
{% if tree.entrypoints %}
{% if hierarchical %}â”‚   {% else %}  {% endif %}{% if emoji %}ğŸ¯{% endif %} Entrypoints:
{% for entrypoint in tree.entrypoints[:3] %}
{% if hierarchical %}â”‚   â”œâ”€â”€{% else %}  â€¢{% endif %} {{ entrypoint.identifier }}
{% if hierarchical %}â”‚   â”‚   {% else %}    {% endif %}Location: {{ entrypoint.location }}
{% if hierarchical %}â”‚   â”‚   {% else %}    {% endif %}Type: {{ entrypoint.type }}
{% if hierarchical %}â”‚   â”‚   {% else %}    {% endif %}Relevance: {{ (entrypoint.relevance_score * 100) | round(1) }}%
{% endfor %}
{% if tree.entrypoints | length > 3 %}
{% if hierarchical %}â”‚   â””â”€â”€{% else %}  â€¢{% endif %} ... and {{ tree.entrypoints | length - 3 }} more entrypoints
{% endif %}
{% endif %}

{% if not loop.last %}
{% if hierarchical %}â”‚{% endif %}
{% endif %}
{% endfor %}
{% else %}
{% if emoji %}âŒ{% endif %} No exploration trees found
{% endif %}
